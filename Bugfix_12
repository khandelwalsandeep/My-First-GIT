Bug fixes for issue-12

Added some fixes for branch-1